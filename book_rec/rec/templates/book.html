<!DOCTYPE html>
<html>
<head>
    <title>Douban 豆瓣</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入 Bootstrap -->
    <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static ''%}css/css.css" />
    <!-- HTML5 Shim 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
    <!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
    <!--[if lt IE 9]>
       <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
       <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <!-- jQuery (Bootstrap 的 JavaScript 插件需要引入 jQuery) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- 包括所有已编译的插件 -->
    <script src="{% static ''%}js/bootstrap.min.js"></script>

    <div id="main" class="container">

        <nav id="navBar" class="navbar navbar-default" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Reader</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

               

                <form action="/search/" method="get" class="navbar-form navbar-left" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="put">
                        <div class="input-group-btn">
                            <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>

                <ul class="nav navbar-nav navbar-right">
                    <li class="navbar-form" role="log">
                        <!-- change to print userID here -->
                        <!--<div class="input-group">
                            userID
                        </div>-->
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="User Name" name="id">
                            <div class="input-group-btn">
                               <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-user"></i></button>
                            </div>

                        </div>
                    </li>
                
                </ul>
            </div><!-- /.navbar-collapse -->
        </nav>

        <!-- *********************************************************************************************************************** -->


        <div class="row clearfix">
            <div class="row clearfix">
                <div class="col-md-6 column">
                    <div class="col-md-4 column">
                        <img src={{book.image_url_l}} height="200" width="150">  <!--change picture here-->
                    </div>
                    <div class="col-md-6 column">
                        <ul>
                            <BookName>{{book.book_title}}</BookName>    <!--change name here-->
                                                    
                            <li>
                                <Author>{{book.book_author}}</Author>
                            </li>
                            <li>
                                {{book.isbn}}
                            </li>
                            <Rating>
                                Rating: {{ ratingavg }}/10.0 
                                {{ rating.rating_num }} rated <!--change rating here-->
                            </Rating>
                            <li class="row top-buffer">

                            </li>
                            
                            <li class="row top-buffer">
                            </li>
                                   
                            <li>
                                    <form action="/backtorec/" method="get"> 
                                        <!--<fieldset class="rating">        
                                            <input type="radio" id="star10" name="rating" value="10" /><label for="star10" title="Rocks!">5 stars</label>
                                            <input type="radio" id="star9" name="rating" value="9" /><label for="star9" title="Pretty good">4 stars</label>
                                            <input type="radio" id="star8" name="rating" value="8" /><label for="star8" title="Meh">3 stars</label>
                                            <input type="radio" id="star7" name="rating" value="7" /><label for="star7" title="Kinda bad">2 stars</label>
                                            <input type="radio" id="star6" name="rating" value="6" /><label for="star6" title="Sucks big time">1 star</label>                    
                                            <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="Rocks!">5 stars</label>
                                            <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="Pretty good">4 stars</label>
                                            <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="Meh">3 stars</label>
                                            <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="Kinda bad">2 stars</label>
                                            <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="Sucks big time">1 star</label>

                                        </fieldset>-->
                                        <!--<h1>Half Star Rating</h1>-->
                                        
                                        <fieldset class="rate">
                                            Your Rating : <input type="radio" id="rating10" name="rating1" value="10" onclick="return mOver(10)" /><label for="rating10" title="5 stars" ></label>
                                            <input type="radio" id="rating9" name="rating1" value="9" onclick="return mOver(9)"/><label class="half" for="rating9" title="4.5 stars"></label>
                                            <input type="radio" id="rating8" name="rating1" value="8"onclick="return mOver(8)" /><label for="rating8" title="4 stars"></label>
                                            <input type="radio" id="rating7" name="rating1" value="7"onclick="return mOver(7)" /><label class="half" for="rating7" title="3.5 stars"></label>
                                            <input type="radio" id="rating6" name="rating1" value="6" onclick="return mOver(6)"/><label for="rating6" title="3 stars"></label>
                                            <input type="radio" id="rating5" name="rating1" value="5" onclick="return mOver(5)"/><label class="half" for="rating5" title="2.5 stars"></label>
                                            <input type="radio" id="rating4" name="rating1" value="4" onclick="return mOver(4)"/><label for="rating4" title="2 stars"></label>
                                            <input type="radio" id="rating3" name="rating1" value="3" onclick="return mOver(3)"/><label class="half" for="rating3" title="1.5 stars"></label>
                                            <input type="radio" id="rating2" name="rating1" value="2"onclick="return mOver(2)" /><label for="rating2" title="1 star"></label>
                                            <input type="radio" id="rating1" name="rating1" value="1"onclick="return mOver(1)" /><label class="half" for="rating1" title="0.5 star"></label>
                                            <input type="submit">
                                            <!--<input type="radio" id="rating0" name="rating" value="0" /><label for="rating0" title="No star"></label>-->
                                        </fieldset>
                                    <!--<input type="text" class="form-control" placeholder="1-10" name="rating" id="rating" onmouseover="mOver(this)" onmouseout="mOut(this)">-->
                                            <input type="hidden" value = {{book.isbn}} name="bookisbn">
                                            <input type="hidden" value = {{key}} name="key" />
                                            <input type="hidden" value=0 name="rating" id="haha" />
                                            <button type="submit" class="btn btn-success">Rate</button>
                                    <!--<div class="input-group-btn">
                                        <button class="btn btn-default" type="submit" onclick="return rate()" ><i class="glyphicon glyphicon-pencil"></i></button>
                                          
                                    </div>-->
                                    </form>
                                <script>

                                </script>
                                

                                <script>
                                    function mOver(int) {
                                        document.getElementById("haha").value = int;
                                        alert(int);
                                        return true;
                                    }
                                    function mOut(obj) {
                                        rate();
                                    }
                                </script>
                                <script>
                                    function rate() {
                                        var value = Number(rating.value);
                                        if (Math.floor(value) == value && value <11 && value >0) {
                                            // save rating here!
                                            return true;
                                        } else {
                                            if (value > 10) {
                                                document.getElementById("rating").value = "";
                                                alert("Rating must be lower than 10");
                                                return false;
                                            } else if (value < 1) {
                                                document.getElementById("rating").value = "";
                                                alert("rating must be bigger than 1");
                                            } else if (Math.floor(value) != value) {
                                                document.getElementById("rating").value = "";
                                                alert("Enter an integer rating!");
                                                return false;
                                            }
                                        }
                                    }

                                </script>
                            </li>

                        </ul>
                    </div>
                </div>
              
               
        </div>

    </div>
</body>
</html>